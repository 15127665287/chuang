<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <!-- 浏览器兼容 -->
    
    <meta http-equiv="X-UA-Compatible" content="IE=9">
    <!-- 忽略将页面中的数字识别为电话号码 -->
    <meta name="format-detection" content="telephone=no">
    <!-- 忽略Android平台中对邮箱地址的识别 -->
    <meta name="format-detection" content="email=no">
    <!-- iphone中safari顶端的状态条的样式,默认值为default（白色），可以定为black（黑色）和black-translucent（灰色半透明）。-->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- H5页面窗口自动调整到设备宽度，并禁止用户缩放页面 -->
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <!-- 删除默认的苹果工具栏和菜单栏。 -->
    <!-- iphone设备中的safari私有meta标签，它表示：允许全屏模式浏览； -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- 网站开启对 web app 程序的支持 -->
    <meta name="apple-touch-fullscreen" content="yes">
    <title>童心制物2019新品发布会</title>
    <link rel="stylesheet" type="text/css" href="css/reset.css"/>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <link rel="stylesheet" type="text/css" href="css/animate.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/swiper.min.css"/>
    <script>
        function Rem() {
            var docEl = document.documentElement,
                oSize = docEl.clientWidth / 7.5;
            if (oSize > 100) {
                oSize = 100; // 限制rem值  750 / 7.5 =100
            }
            docEl.style.fontSize = oSize + 'px';
        }
        window.addEventListener('resize', Rem, false);
        Rem();
    </script>
</head>
<body>
	<div class="wrap">
    	<div class="swiper-container swiper-container-father swiper-container-vertical swiper-container-android">
		    <div class="swiper-wrapper">
		      	<section class="swiper-slide swiper-slide1 swiper-slide-bg swiper-slide-active">
		        	<img class="img1 fadeInDown animated ani" swiper-animate-effect="fadeInDown" src="img/f1.png"/>
		        	<div class="fadeInUpBig animated ani" swiper-animate-effect="fadeInUpBig">
		        		<img class="img2" src="img/f2.png"/>
			        	<img class="img3" src="img/f3.png"/>
			        	<img class="img4 jita" src="img/f4.png"/>
			        	<img class="img5" src="img/f5.png"/>
			        	<img class="img6 bf" src="img/f6.png"/>
			        	<img class="img7 bf" src="img/f7.png"/>
			        	<img class="img8 bf" src="img/f8.png"/>
			        	<img class="img9 scale" src="img/f9.png"/>
			        	<img class="img10" src="img/f10.png"/>
			        	<img class="img11 bf" src="img/f11.png"/>
			        	<img class="img12" src="img/f12.png"/>
			        	<img class="img13" src="img/f13.png"/>
		        	</div>
		        	<img class="img24 fadeInUpBig animated ani" swiper-animate-effect="fadeInUpBig" src="img/f24.png"/>
		        </section>
		        
		        <section class="swiper-slide swiper-slide2">
		         	<img style="width: 76%;margin-left: 12%;margin-top: 1rem;" class="fadeInDown animated ani" swiper-animate-effect="fadeInDown" src="img/f22.png"/>
		         	<div class="time fadeInUpBig animated ani" swiper-animate-effect="fadeInUpBig">
		         		<span class="xian"></span>
		         		<div class="div1 clearfix">
		         			<img class="bf" src="img/f25.png"/>
		         			<div class="zi">
		         				<p>&nbsp;14:00-14:30    &nbsp;签到</p>
		         			</div>
		         		</div>
		         		<div class="div2 clearfix">
		         			<img class="bf" src="img/f25.png"/>
		         			<div class="zi">
		         				<p>&nbsp;14:30-16:00    &nbsp;新品发布</p>
		         			</div>
		         		</div>
		         		<div class="div3 clearfix">
		         			<img class="bf" src="img/f25.png"/>
		         			<div class="zi">
		         				<p>&nbsp;16:00-16:30    &nbsp;新品体验</p>
		         			</div>
		         		</div>
		         		<div class="div4 clearfix">
		         			<img class="bf" src="img/f25.png"/>
		         			<div class="zi">
		         				<p>&nbsp;16:30-18:30    &nbsp;受邀媒体群访</p>
		         			</div>
		         		</div>
		         	</div>
		        </section>
		        
		        <section class="swiper-slide swiper-slide3">
		        	<img style="width: 76%;margin-left: 12%;margin-top: 1rem;" class="fadeInDown animated ani" swiper-animate-effect="fadeInDown" src="img/f22.png"/>
		        	<div class="sub">
		        		<div class="sub1 clearfix">
		        			<img style="margin-top: .2rem;" src="img/f18.png"/>
		        			<p>姓名</p>
		        			<input class="name" type="text" name="name" id="" value="" />
		        		</div>
		        		<div class="sub2 clearfix">
		        			<img src="img/f19.png"/>
		        			<p>公司</p>
		        			<input class="com" type="text" name="com" id="" value="" />
		        		</div>
		        		<div class="sub3 clearfix">
		        			<img style="margin-top: 0.15rem;" src="img/f20.png"/>
		        			<p>手机号</p>
		        			<input class="tel" type="text" name="tel" id="" value="" />
		        		</div>
		        		<button style="font-size: 16px;border-radius: 4px;" id="btn">提交</button>
		        	</div>
		        </section>
		        
		        <section class="swiper-slide swiper-slide4"> 
		        	<img class="img1 fadeInDown animated ani" swiper-animate-effect="fadeInDown" src="img/f23.png"/>
		        	<img class="img14" src="img/f14.png"/>
		        	<div class="fadeInUpBig animated ani" swiper-animate-effect="fadeInUpBig">
		        		<img class="img15" src="img/f15.png"/>
			        	<div class="bg">
			        		<img src="img/f16.png"/>
			        	</div>
			        	<img class="img17" src="img/f17.png"/>
		        	</div>
		        	
		        </section>
		    </div>
		</div>
    </div>
	
	<script src="js/swiper.animate.min.js"></script>
	<script src="js/swiper.min.js"></script>
	<script src="js/jquery-1.11.0.js"></script>
	<script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
	<script>
		

		function disNext(){
			swiperFather.lockSwipeToNext();
		}

		function showNext(){
			swiperFather.unlockSwipeToNext();
		}
		var swiperIndex = sessionStorage.getItem('swiperIndex') ? sessionStorage.getItem('swiperIndex') : 0,
    
	initSwiper = {
        direction: 'vertical',
        // initialSlide: swiperIndex,
        prevButton: '.pre-page-btn',
        nextButton: '.next-page-btn',
        // 切换页面成功之前的回调
        onTransitionStart: function(swiper) {   //onSlideChangeStart当前slide开始过渡到另一个slide时执行。触摸情况下，如果释放slide时没有达到过渡条件而回弹时不会触发这个函数
            sessionStorage.setItem('swiperIndex', swiper.activeIndex);  //将swiper.activeIndex存储到swiperIndex字段
//          禁止滑动
             console.log(swiper.activeIndex);
//           console.log(swiper.previousIndex)
			
			if(swiper.activeIndex === 2){   //如果页面的activeIndex等于1的话，就调用disNext()函数禁止滑动
				disNext();
			}else if(swiper.activeIndex === 1){   //如果页面的activeIndex等于0的话，就调用showNext()函数开启滑动
				showNext();
			}else if(swiper.activeIndex === 2){   //如果页面的activeIndex等于0的话，就调用showNext()函数开启滑动
				swiperFather.lockSwipeToPrev();
			}
      	},
      
        onInit: function(swiper) {    //回调函数，初始化后执行。
            swiperAnimateCache(swiper);  //隐藏元素动画
            swiperAnimate(swiper);		//初始化完成开始动画
            
        },
        onSlideChangeEnd: function(swiper) {   //从一个slide过渡到另一个slide结束时执行
            swiperAnimate(swiper);
         	
        },
        onTransitionEnd: function(swiper) {   //过渡结束时触发,人为中断过渡不会触发这个函数
            swiperAnimate(swiper);
        },
		
        watchSlidesProgress: true,   //开启这个参数来计算每个slide的progress(进度、进程)，Swiper的progress无需设置即开启。
        onProgress: function(swiper) {                  //当Swiper的progress被改变时执行
            for(var i = 0; i < swiper.slides.length; i++) {
                var slide = swiper.slides[i];
                var progress = slide.progress;
                var translate = progress * swiper.height / 4;
                scale = 1 - Math.min(Math.abs(progress * 0.5), 1);
                var opacity = 1 - Math.min(Math.abs(progress / 2), 0.5);
                slide.style.opacity = opacity;
                es = slide.style;
                es.webkitTransform = es.MsTransform = es.msTransform = es.MozTransform = es.OTransform = es.transform = 'translate3d(0,' + translate + 'px,-' + translate + 'px) scaleY(' + scale + ')';

            }
        },

        onSetTransition: function(swiper, speed) {   //每当设置Swiper开始过渡动画时执行。transtion获取到的是Swiper的speed值
            for(var i = 0; i < swiper.slides.length; i++) {
                es = swiper.slides[i].style;
                es.webkitTransitionDuration = es.MsTransitionDuration = es.msTransitionDuration = es.MozTransitionDuration = es.OTransitionDuration = es.transitionDuration = speed + 'ms';
            }
        }
    };
    	
    	var swiperFather = new Swiper('.swiper-container-father', initSwiper);
		var swiper = new Swiper('.swiper-container', {
	        pagination: '.swiper-pagination',
	        paginationClickable: true,
	        direction: 'vertical'
    	});
    	
    	$('#btn').click(function(){
    		var checked_contact =  /^[\u4E00-\u9FA5A-Za-z]+$/; 
    		var myreg=/^[1][3,4,5,7,8][0-9]{9}$/;			   
    		if($('.name').val()==''||$('.com').val()==''||$('.tel').val()==''){
    			alert('请您补全信息');
    			return false;
    		}else if(!checked_contact.test($('.name').val())){
    			alert("请正确填写您的姓名");
    			return false;
    		}else if(!myreg.test($('.tel').val())){
    			alert("请正确填写您的手机号")
                return false;
    		}else{
    			swiperFather.slideTo(3, 1000, true)
    		}
    	})
    	
    	//ios系统页面回弹
    	$("input").on("blur",function(){
    		window.scroll(0,0); 
		});
		
		//ios，alert去除默认网址
		 window.alert = function(name){
	     var iframe = document.createElement("IFRAME");
	     iframe.style.display="none";
	     document.documentElement.appendChild(iframe);
	     window.frames[0].window.alert(name);
	     iframe.parentNode.removeChild(iframe)
		}
		window.confirm = function (message) {
		      var iframe = document.createElement("IFRAME");
		      iframe.style.display = "none";
		      iframe.setAttribute("src", 'data:text/plain,');
		      document.documentElement.appendChild(iframe);
		      var alertFrame = window.frames[0];
		      var result = alertFrame.window.confirm(message);
		      iframe.parentNode.removeChild(iframe);
		      return result;
		}
	</script>
	
	<script>
			$.get("http://c.eventnet.cn/wx/fx/index.php","",function(d){
				wx.config({
					appId: d.appId,
					timestamp: d.timestamp,
					nonceStr: d.nonceStr,
					signature: d.signature,
					jsApiList: [
						'checkJsApi',
						'onMenuShareTimeline',
						'onMenuShareAppMessage'
					]
				});
				wx.ready(function () { 											/*http://c.eventnet.cn/data/*/
					iniShare({title: '童心制物2019新品发布会', desc:'时间：5月21日 \n地点：北京',link:'http://www.eventnet.cn/makeblock/','logo':'http://www.eventnet.cn/makeblock/img/wxlogo.jpg?v=1.3'})

				});
				wx.error(function (res) {
					alert(res.errMsg);
				});

			},"jsonp")

			function iniShare(data){
				
				var shareData = {
					title: data.title,
					desc: data.desc,
					link: data.link,
					imgUrl: data.logo,
					trigger: function (res) { },
					success: function (res) {},
					cancel: function (res) {},
					fail: function (res) {}
				};

				//好友
				wx.onMenuShareAppMessage(shareData);
				//朋友圈
				shareData = {
					title:  data.title,
					link: data.link,
					imgUrl: data.logo,
					trigger: function (res) { },
					success: function (res) { },
					cancel: function (res) {},
					fail: function (res) { }

				};
				wx.onMenuShareTimeline(shareData);

			}
			window.onload = function(){
				$('.xian').height($('.time').height())
			}
		</script>
</body>
</html>